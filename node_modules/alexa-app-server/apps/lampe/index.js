module.change_code = 1;
'use strict';

var alexa = require( 'alexa-app' );
var app = new alexa.app( 'lampe' );
const request = require('request');
var yes = true;
app.launch(function(req, res) {
	res.say('sag eine Farbe')
	res.shouldEndSession(false, 'Sag eine Farbe');
} );


app.error = function( exception, request, response ) {
	console.log(exception)
	console.log(request);
	console.log(response);
	response.say('Sorry da ist was schief gelaufen' + error.message);
};
var request = require('request');
app.intent('lamp',
  {
  "slots":
			{"FARBE":"AMAZON.Color"},
	"utterances":[
			"Stell meine Lampe auf {FARBE}",
			"Lampe auf {FARBE}",
			"{FARBE}",
			"nach {FARBEN}",
			"Lass meine Lampe in {FARBE} leuchten"]
  },
  function(req,res) {
    var farbe = req.slot('FARBE');
		farbe = farbe.toLowerCase();
    switch(farbe){
			case "rot":
				request.get("http://arduinolampe.ddns.net/"+"rot.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "blau":
				request.get("http://arduinolampe.ddns.net/"+"blau.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "grün":
				request.get("http://arduinolampe.ddns.net/"+"grün.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "gelb":
				request.get("http://arduinolampe.ddns.net/"+"gelb.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "orange":
				request.get("http://arduinolampe.ddns.net/"+"orange.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}

				break;
			case "lila":
				request.get("http://arduinolampe.ddns.net/"+"lila.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "weiß":
				request.get("http://arduinolampe.ddns.net/"+"weiß.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			case "aus":
				request.get("http://arduinolampe.ddns.net/"+"aus.py", function (error, response, body) {
				if (!error && response.statusCode == 200) {

				}
				break;
			default:
				
		}



});
app.intent('help',
	{
		"utterances":[
				"Ich brauche Hilfe",
				"Hilfe"
		]

	},
	function(req, res){
		res.say("Ich kenne die Farben Rot, Blau, Grün, Gelb, Orange, Lila und Weiß.");
	}


)
module.exports = app;
