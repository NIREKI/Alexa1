module.change_code = 1;
'use strict';

var alexa = require( 'alexa-app' );
var app = new alexa.app( 'lampe' );
const request = require('request');
var yes = true;
app.launch(function(req, res) {
	res.say('sag eine Farbe')
	res.shouldEndSession(false, 'Sag eine Farbe');
} );


app.error = function( exception, request, response ) {
	console.log(exception)
	console.log(request);
	console.log(response);
	response.say('Sorry da ist was schief gelaufen' + error.message);
};

app.intent('lamp',
  {
  "slots":
			{"FARBE":"AMAZON.Color"},
	"utterances":[
			"Stell meine Lampe auf {FARBE}",
			"Lampe auf {FARBE}",
			"{FARBE}",
			"nach {FARBEN}",
			"Lass meine Lampe in {FARBE} leuchten"]
  },
  function(req,res) {
		var link = "";
    var farbe = req.slot('FARBE');
		farbe = farbe.toLowerCase();
		var red = 0;
		var green = 0;
		var blue = 0;
    switch(farbe){
			case "rot":
				link = "rot.php";
				break;
			case "blau":
				link = "blau.php";
				break;
			case "grün":
				link = "grün.php";
				break;
			case "gelb":
				link = "gelb.php";
				break;
			case "orange":
				link = "orange.php";
				break;
			case "lila":
				link = "lila.php";
				break;
			case "weiß":
				link = "weiß.php";
				break;
			case "aus":
				link = "aus.php";
				break;
			default:

		}


				var request = require('request');
				request.get("http://arduinolampe.ddns.net/"+link, function (error, response, body) {
		    if (!error && response.statusCode == 200) {

		    }
				console.log("arduinolampe.ddns.net/""+ link);
				});
});
app.intent('help',
	{
		"utterances":[
				"Ich brauche Hilfe",
				"Hilfe"
		]

	},
	function(req, res){
		res.say("Ich kenne die Farben Rot, Blau, Grün, Gelb, Orange, Lila und Weiß.");
	}


)
module.exports = app;
